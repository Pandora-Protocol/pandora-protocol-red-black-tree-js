!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("rbTree",[],t):"object"==typeof exports?exports.rbTree=t():e.rbTree=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var l=r[n]={i:n,l:!1,exports:{}};return e[n].call(l.exports,l,l.exports,t),l.l=!0,l.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={RED:0,BLACK:1};t.default=n,e.exports=t.default},function(e,t,r){"use strict";function n(e){if(isNaN(e)&&"string"==typeof e){var t=e.toLowerCase();if(t.length>1){var r="",n=!0,l=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){r+=i.value.charCodeAt(0)-96+""}}catch(e){l=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(l)throw o}}return parseInt(r)}return t.charCodeAt(0)-96}return e}function l(e){return null==e||null==e.key&&null==e.value&&e.color===i.default.BLACK&&null==e.left&&null==e.right}Object.defineProperty(t,"__esModule",{value:!0}),t.toNumber=n,t.isNilNode=l;var o=r(0),i=function(e){return e&&e.__esModule?e:{default:e}}(o)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),i=function(e){return e&&e.__esModule?e:{default:e}}(o),u=r(1),a=function(){function e(t,r,l){n(this,e),this.key=(0,u.toNumber)(t),this.id=l,this.value=r,this.left=null,this.right=null,this.color=null,this.parent=null}return l(e,[{key:"isRed",value:function(){return this.color===i.default.RED}},{key:"getValue",value:function(){return{key:this.key,id:this.id,value:this.value}}},{key:"getValueKeyArray",value:function(){return[this.id,this.value,this.key]}}]),e}();t.default=a,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=new i.default(null,null);return t.color=a.default.BLACK,t.parent=e,t}Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),i=n(o),u=r(0),a=n(u);t.default=l,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t,r){var n=new i.default(e,t,r),l=new i.default(null,null,null);l.color=a.default.BLACK,l.left=null,l.right=null,l.parent=n;var o=new i.default(null,null,null);return o.color=a.default.BLACK,o.left=null,o.right=null,o.parent=n,n.left=l,n.right=o,n}Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),i=n(o),u=r(0),a=n(u);t.default=l,e.exports=t.default},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(1),i=function(){function e(t){n(this,e),this.stack=[],this.curr=t}return l(e,[{key:"hasNext",value:function(){return!(0,o.isNilNode)(this.curr)||this.stack.length>0}},{key:"next",value:function(){for(;!(0,o.isNilNode)(this.curr);)this.stack.push(this.curr),this.curr=this.curr.left;this.curr=this.stack.pop();var e=this.curr;return this.curr=this.curr.right,e.getValue()}}]),e}();t.default=i,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(2),u=n(i),a=r(0),f=n(a),s=r(4),c=n(s),d=r(3),h=n(d),p=r(5),g=n(p),v=r(1),y=function(){function e(){l(this,e),this.emptyTree()}return o(e,[{key:"clone",value:function(e){return new u.default(e.key,e.value,e.id,e.left,e.right,e.color,e.parent)}},{key:"find",value:function(e){for(var t=(0,v.toNumber)(e),r=this.root;null!=r;)if(t<r.key)r=r.left;else{if(!(t>r.key))return r.value;r=r.right}return null}},{key:"leftMostChild",value:function(e){if((0,v.isNilNode)(e))return null;for(;!(0,v.isNilNode)(e.left);)e=e.left;return e}},{key:"findNode",value:function(e){for(var t=this.root;null!=t;)if(e<t.key)t=t.left;else{if(!(e>t.key))return e===t.key?t:null;t=t.right}return null}},{key:"update",value:function(e,t,r){var n=this.findNode(e);n.value=t,n.id=r}},{key:"rotateRight",value:function(e){var t=e.left;(0,v.isNilNode)(t.right)?e.left=(0,h.default)(e):e.left=t.right,(0,v.isNilNode)(t.right)||(t.right.parent=e),t.parent=e.parent,(0,v.isNilNode)(e.parent)?this.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}},{key:"rotateLeft",value:function(e){var t=e.right;(0,v.isNilNode)(t.left)?e.right=(0,h.default)(e):e.right=t.left,(0,v.isNilNode)(t.left)||(t.left.parent=e),t.parent=e.parent,(0,v.isNilNode)(e.parent)?this.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}},{key:"insert",value:function(e,t,r){var n=null,l=this.root,o=(0,c.default)(e,t,r);if(1===++this.count)this.root=o,o.color=f.default.BLACK,o.parent=null;else{for(;!(0,v.isNilNode)(l);)n=l,l=o.key<l.key?l.left:l.right;o.parent=n,o.key<n.key?n.left=o:n.right=o,o.left=(0,h.default)(o),o.right=(0,h.default)(o),o.color=f.default.RED,this.fixTree(o)}return o}},{key:"fixTree",value:function(e){for(;null!=e.parent&&e.parent.color===f.default.RED;){var t=null;if(e.parent===e.parent.parent.left){if(null!=(t=e.parent.parent.right)&&t.color===f.default.RED){e.parent.color=f.default.BLACK,t.color=f.default.BLACK,e.parent.parent.color=f.default.RED,e=e.parent.parent;continue}e===e.parent.right&&(e=e.parent,this.rotateLeft(e)),e.parent.color=f.default.BLACK,e.parent.parent.color=f.default.RED,this.rotateRight(e.parent.parent)}else{if(null!=(t=e.parent.parent.left)&&t.color===f.default.RED){e.parent.color=f.default.BLACK,t.color=f.default.BLACK,e.parent.parent.color=f.default.RED,e=e.parent.parent;continue}e===e.parent.left&&(e=e.parent,this.rotateRight(e)),e.parent.color=f.default.BLACK,e.parent.parent.color=f.default.RED,this.rotateLeft(e.parent.parent)}}this.root.color=f.default.BLACK}},{key:"findHeight",value:function(e){if(null==e)return-1;var t=this.findHeight(e.left),r=this.findHeight(e.right);return t>r?t+1:r+1}},{key:"print",value:function(){var e=this.findHeight(this.root)+1;this.printHelper(this.root,"__",e)}},{key:"printHelper",value:function(e,t,r){var n=r;if(null!=e){if(e===this.root&&console.log(e.key+" color: "+e.color),null!=e.left){var l="( parent node "+e.left.parent.key+")";console.log(""+t+e.left.key+" color: "+e.left.color+" "+l)}if(null!=e.right){var o="( parent node "+e.right.parent.key+")";console.log(""+t+e.right.key+" color: "+e.right.color+" "+o)}n-=1,this.printHelper(e.left,t+t,n),this.printHelper(e.right,t+t,n)}}},{key:"emptyTree",value:function(){this.root=null,this.count=0}},{key:"min",value:function(e){if(null==e||void 0===e)return{};for(;!(0,v.isNilNode)(e.left);)e=e.left;return e}},{key:"minNode",value:function(){for(var e=this.root;!(0,v.isNilNode)(e.left);)e=e.left;return e.getValue()}},{key:"maxNode",value:function(){for(var e=this.root;!(0,v.isNilNode)(e.right);)e=e.right;return e.getValue()}},{key:"transplant",value:function(e,t){null==e.parent?this.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.parent=e.parent}},{key:"remove",value:function(e){var t=this.findNode(e);this.removeNode(t)}},{key:"removeNode",value:function(e){if(null!=e){var t=void 0,r=e,n=r.color;(0,v.isNilNode)(e.left)?(t=e.right,this.transplant(e,e.right)):(0,v.isNilNode)(e.right)?(t=e.left,this.transplant(e,e.left)):(r=this.min(e.right),n=r.color,t=r.right,r.parent===e?t.parent=r:(this.transplant(r,r.right),r.right=e.right,r.right.parent=r),this.transplant(e,r),r.left=e.left,r.left.parent=r,r.color=e.color),n===f.default.BLACK&&this.removeFix(t),this.count--}}},{key:"removeFix",value:function(e){for(;e!==this.root&&e.color===f.default.BLACK;)if(e===e.parent.left){var t=e.parent.right;if(t.color===f.default.RED&&(t.color=f.default.BLACK,e.parent.color=f.default.RED,this.rotateLeft(e.parent),t=e.parent.right),t.left.color===f.default.BLACK&&t.right.color===f.default.BLACK){t.color=f.default.RED,e=e.parent;continue}t.right.color===f.default.BLACK&&(t.left.color=f.default.BLACK,t.color=f.default.RED,t=e.parent.right),t.right.color===f.default.RED&&(t.color=e.parent.color,e.parent.color=f.default.BLACK,t.right.color=f.default.BLACK,this.rotateLeft(e.parent),e=this.root)}else{var r=e.parent.left;r.color===f.default.RED&&(r.color=f.default.BLACK,e.parent.color=f.default.RED,this.rotateRight(e.parent),r=e.parent.left),r.right.color===f.default.BLACK&&r.left.color===f.default.BLACK?(r.color=f.default.RED,e=e.parent):r.left.color===f.default.BLACK&&(r.right.color=f.default.BLACK,r.color=f.default.RED,this.rotateLeft(r),r=e.parent.left),r.left.color===f.default.RED&&(r.color=e.parent.color,e.parent.color=f.default.BLACK,r.left.color=f.default.BLACK,this.rotateRight(e.parent),e=this.root)}e.color=f.default.BLACK}},{key:"inOrderSucc",value:function(e){if((0,v.isNilNode)(e))return null;if((0,v.isNilNode)(e.right)){for(var t=e,r=e.parent;null!=r&&r.left!==t;)t=r,r=r.parent;return null==r?null:r.getValue()}return this.leftMostChild(e.right).getValue()}},{key:"getSortedAfter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"getValue",n=this.findNode(e),l=[];return this._getSortedAfter(n,e,l,t,{},r),l}},{key:"_getSortedAfter",value:function(e,t,r,n,l,o){(0,v.isNilNode)(e)||r.length===n||l[e.key]||(l[e.key]=!0,!(0,v.isNilNode)(e.left)&&e.left.key>=t&&this._getSortedAfter(e.left,t,r,n,l,o),e.key>=t&&r.length<n&&r.push(e[o]()),!(0,v.isNilNode)(e.right)&&e.right.key>=t&&this._getSortedAfter(e.right,t,r,n,l,o),this._getSortedAfter(e.parent,t,r,n,l,o))}},{key:"getSortedBefore",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"getValue",n=this.findNode(e),l=[];return this._getSortedBefore(n,e,l,t,{},r),l}},{key:"_getSortedBefore",value:function(e,t,r,n,l,o){(0,v.isNilNode)(e)||r.length===n||l[e.key]||(l[e.key]=!0,!(0,v.isNilNode)(e.right)&&e.right.key<=t&&this._getSortedBefore(e.right,t,r,n,l,o),e.key<=t&&r.length<n&&r.push(e[o]()),!(0,v.isNilNode)(e.left)&&e.left.key<=t&&this._getSortedBefore(e.left,t,r,n,l,o),this._getSortedBefore(e.parent,t,r,n,l,o))}},{key:"toSortedArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"getValue",t=[];return this.inOrder(this.root,t,e),t}},{key:"toSortedArrayReverse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"getValue";return this.toSortedArray(e).reverse()}},{key:"toArrayPreOrder",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"getValue",t=[];return this.preOrder(this.root,t,e),t}},{key:"toArrayPostOrder",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"getValue",t=[];return this.postOrder(this.root,t,e),t}},{key:"inOrder",value:function(e,t,r){(0,v.isNilNode)(e)||(this.inOrder(e.left,t,r),t.push(e[r]()),this.inOrder(e.right,t,r))}},{key:"preOrder",value:function(e,t,r){(0,v.isNilNode)(e)||(t.push(e[r]()),this.preOrder(e.left,t,r),this.preOrder(e.right,t,r))}},{key:"postOrder",value:function(e,t,r){(0,v.isNilNode)(e)||(this.postOrder(e.left,t,r),this.postOrder(e.right,t,r),t.push(e[r]()))}},{key:"createIterator",value:function(){return new g.default(this.root)}},{key:"isEmpty",get:function(){return 0===this.count}}]),e}();t.default=y,e.exports=t.default}])});